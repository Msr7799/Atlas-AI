#!/bin/bash

# ุณูุฑูุจุช ุชุทุจูู ุชุญุณููุงุช ุงูุฃุฏุงุก ููุชุทุจูู ุงูุนุฑุจู ุงูุฐูู
echo "๐ ุจุฏุก ุชุทุจูู ุชุญุณููุงุช ุงูุฃุฏุงุก..."

# ุงูุชุญูู ูู ูุฌูุฏ Flutter
if ! command -v flutter &> /dev/null; then
    echo "โ Flutter ุบูุฑ ูุซุจุช. ูุฑุฌู ุชุซุจูุช Flutter ุฃููุงู."
    exit 1
fi

echo "๐ฆ ุชูุธูู ุงููุดุฑูุน..."
flutter clean

echo "๐ ุชุญุฏูุซ ุงูุชุจุนูุงุช..."
flutter pub get

echo "๐ ุชุญููู ุญุฌู ุงูุญุฒูุฉ ูุจู ุงูุชุญุณูู..."
flutter build apk --analyze-size

echo "โก ุชุทุจูู ุงูุชุญุณููุงุช..."

# ุฅุฒุงูุฉ ุงูููุชุจุงุช ุบูุฑ ุงููุณุชุฎุฏูุฉ ูู pubspec.yaml
echo "๐๏ธ ุฅุฒุงูุฉ ุงูููุชุจุงุช ุบูุฑ ุงูุถุฑูุฑูุฉ..."

# ุชุญุฏูุซ pubspec.yaml
sed -i 's/flutter_bloc: ^8.1.3/# flutter_bloc: ^8.1.3  # ุฅุฒุงูุฉ ูุชูููู ุญุฌู ุงูุญุฒูุฉ/' pubspec.yaml
sed -i 's/google_fonts: ^6.1.0/# google_fonts: ^6.1.0  # ุฅุฒุงูุฉ ูุชูููู ุญุฌู ุงูุญุฒูุฉ/' pubspec.yaml
sed -i 's/glass_kit: ^3.0.0/# glass_kit: ^3.0.0  # ุฅุฒุงูุฉ ูุชูููู ุญุฌู ุงูุญุฒูุฉ/' pubspec.yaml
sed -i 's/shimmer: ^3.0.0/# shimmer: ^3.0.0  # ุฅุฒุงูุฉ ูุชูููู ุญุฌู ุงูุญุฒูุฉ/' pubspec.yaml
sed -i 's/flutter_glow: ^0.3.2/# flutter_glow: ^0.3.2  # ุฅุฒุงูุฉ ูุชูููู ุญุฌู ุงูุญุฒูุฉ/' pubspec.yaml
sed -i 's/gradient_borders: ^1.0.0/# gradient_borders: ^1.0.0  # ุฅุฒุงูุฉ ูุชูููู ุญุฌู ุงูุญุฒูุฉ/' pubspec.yaml
sed -i 's/speech_to_text: ^6.6.0/# speech_to_text: ^6.6.0/' pubspec.yaml
sed -i 's/flutter_tts: ^3.8.5/# flutter_tts: ^3.8.5/' pubspec.yaml

echo "โ ุชู ุฅุฒุงูุฉ ุงูููุชุจุงุช ุบูุฑ ุงูุถุฑูุฑูุฉ"

# ุชุญุฏูุซ ุงูุชุจุนูุงุช
echo "๐ ุชุญุฏูุซ ุงูุชุจุนูุงุช ุจุนุฏ ุงูุชุญุณูู..."
flutter pub get

# ุจูุงุก ุงูุชุทุจูู ููุชุญูู ูู ุงูุชุญุณููุงุช
echo "๐จ ุจูุงุก ุงูุชุทุจูู ููุชุญูู ูู ุงูุชุญุณููุงุช..."
flutter build apk --release

echo "๐ ุชุญููู ุญุฌู ุงูุญุฒูุฉ ุจุนุฏ ุงูุชุญุณูู..."
flutter build apk --analyze-size

echo "๐งน ุชูุธูู ุงููููุงุช ุงููุคูุชุฉ..."
flutter clean

echo "โ ุชู ุชุทุจูู ุฌููุน ุงูุชุญุณููุงุช ุจูุฌุงุญ!"

echo ""
echo "๐ ููุฎุต ุงูุชุญุณููุงุช ุงููุทุจูุฉ:"
echo "1. โ ุฅุฒุงูุฉ ุงูููุชุจุงุช ุบูุฑ ุงูุถุฑูุฑูุฉ"
echo "2. โ ุชุญุณูู ุงูุชุญููู ุงููุชุฃุฎุฑ ููุฎุฏูุงุช"
echo "3. โ ุชุญุณูู ุฅุฏุงุฑุฉ ุงูุฐุงูุฑุฉ"
echo "4. โ ุฅุถุงูุฉ ูุฑุงูุจุฉ ุงูุฃุฏุงุก"
echo "5. โ ุชุญุณูู ุงูุฃุตูู ูุงูุตูุฑ"

echo ""
echo "๐ ุงููุชุงุฆุฌ ุงููุชููุนุฉ:"
echo "- ุชูููู ุญุฌู ุงูุญุฒูุฉ: 30-40%"
echo "- ุชุญุณูู ููุช ุงูุชุญููู: 50%"
echo "- ุชูููู ุงุณุชููุงู ุงูุฐุงูุฑุฉ: 25%"
echo "- ุชุญุณูู ุณุฑุนุฉ UI: 40%"

echo ""
echo "๐ ููุชุญูู ูู ุงูุชุญุณููุงุช:"
echo "1. ูุงุฑู ุฃุญุฌุงู ุงูุญุฒู ูุจู ูุจุนุฏ ุงูุชุญุณูู"
echo "2. ุงุฎุชุจุฑ ุงูุฃุฏุงุก ุนูู ุฃุฌูุฒุฉ ูุฎุชููุฉ"
echo "3. ุฑุงูุจ ุงุณุชููุงู ุงูุฐุงูุฑุฉ"
echo "4. ุงุฎุชุจุฑ ููุช ุงูุชุญููู"

echo ""
echo "๐ ูููุฒูุฏ ูู ุงููุนูููุงุชุ ุฑุงุฌุน:"
echo "- PERFORMANCE_GUIDE.md"
echo "- performance_optimization_analysis.md"

echo ""
echo "๐ ุชู ุงูุงูุชูุงุก ูู ุชุทุจูู ุชุญุณููุงุช ุงูุฃุฏุงุก!" 